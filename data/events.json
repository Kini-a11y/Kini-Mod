[null,{"name":"Status-Bot","temp":"","event-type":"1","actions":[{"gameName":"ðŸŽ‰Bot Stworzony z pasji !ðŸŽ‰","gameLink":"https://bit.ly/2QsDp0x","name":"Set Bot Game"}]},{"name":"reactionGet","temp":"msgReaction","event-type":"28","_id":"zimku","actions":[{"reaction":"1","varName":"msgReaction","info":"0","storage":"1","varName2":"messageRct","name":"Store Reaction Info"},{"behavior":"1","interpretation":"1","code":"const reaction = tempVars('msgReaction');\nconst msgRct = tempVars('messageRct');\nvar rectarray = globalVars('reactionRoleInf');\nvar usrWhoReacted = reaction.users.last();\nconst _this = this;\nconst fs = require('fs');\nvar messageSent = 'Successfully added the role {roleName} in {server}';\n// The only variables that work rn, {rolename} and {server}\nvar interval;\n\n// Setings\n\nconst dmUserAfter = true; // Default, can be changed to false\n\n//\nasync function checkRoles() {\n    try {\n        if (usrWhoReacted.id != client.user.id) {\n\n            if (rectarray[msgRct.id] != null) {\n                var newArr = rectarray[msgRct.id];\n                for (io = 0; io < newArr.length; io++) {\n                    if (newArr[io][0] == reaction.emoji.name || newArr[io][0].name == reaction.emoji.name) {\n                        var newUsr = await msgRct.guild.fetchMember(usrWhoReacted);\n                        var checkRole = await msgRct.guild.roles.get(newArr[io][1])\n                        if (checkRole != null) {\n                            let newUserArrayIds = [];\n                            let newUserArray = await reaction.users.array();\n\n                            newUserArray.forEach(useritem => {\n                                newUserArrayIds.push(useritem.id)\n                            });\n                            rectarray[msgRct.id][io][3] = newUserArrayIds;\n                            if (newUsr.roles.has(newArr[io][1])) {\n\n                                _this.storeValue(rectarray, 3, 'reactionRoleInf', cache)\n                                fs.writeFile(\"./data/reactionRoleData.json\", JSON.stringify(rectarray), function(err) {\n                                    if (err) {\n                                        return console.log(err);\n                                    }\n                                });\n                                break;\n                            } else {\n\n                                newUsr.addRole(checkRole);\n                                if (dmUserAfter) {\n                                    messageSent = messageSent.replace(/{roleName}/g, checkRole.name);\n                                    messageSent = messageSent.replace(/{server}/g, msgRct.guild.name);\n                                    newUsr.send(messageSent);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t_this.storeValue(rectarray, 3, 'reactionRoleInf', cache)\n                                fs.writeFile(\"./data/reactionRoleData.json\", JSON.stringify(rectarray), function(err) {\n                                    if (err) {\n                                        return console.log(err);\n                                    }\n                                });\n                                break;\n                            }\n                        } else {\n                            delete rectarray[msgRct.id];\n                            _this.storeValue(rectarray, 3, 'reactionRoleInf', cache);\n\n                            msgRct.edit({\n                                embed: {\n                                    color: 0xff0000,\n                                    title: \"Role Reaction Menu\",\n                                    description: `An error has occured.\\nOne of the roles, role name - ${newArr[io][2]} does not exist anymore.\\nIn turn, this embed has now shutdown.\\nPlease remake the embed.`,\n                                    timestamp: new Date()\n                                }\n                            });\n                            _this.callNextAction(cache);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\n\ncheckRoles();","storage":"0","varName":"","name":"Run Script"}]},{"name":"reactionRev","temp":"msgReaction","event-type":"29","_id":"ZQmhC","actions":[{"reaction":"1","varName":"msgReaction","info":"0","storage":"1","varName2":"messageRct","name":"Store Reaction Info"},{"behavior":"1","interpretation":"1","code":"const reaction = tempVars('msgReaction');\nconst msgRct = tempVars('messageRct');\nvar rectarray = globalVars('reactionRoleInf');\nlet usrWhoReacted = reaction.users.array();\nconst _this = this;\nconst fs = require('fs');\n\nlet newUserArrayIds = [];\nlet newUserArray = reaction.users.array();\n\nnewUserArray.forEach(useritem => {\n    newUserArrayIds.push(useritem.id)\n});\n\nvar messageSent = 'Successfully removed the role {roleName} in {server}';\n// The only variables that work rn, {rolename} and {server}\nvar actualUser;\n// Setings\n\nconst dmUserAfter = true; // Default, can be changed to false\n\n//\nasync function checkRoles() {\n    try {\n        if (rectarray[msgRct.id] != null) {\n            var newArr = rectarray[msgRct.id];\n            for (io = 0; io < newArr.length; io++) {\n                if (newArr[io][0] == reaction.emoji.name || newArr[io][0].name == reaction.emoji.name) {\n                    if (rectarray[msgRct.id][io][3] != null) {\n                        usrWhoReacted = rectarray[msgRct.id][io][3].filter(val => !newUserArrayIds.includes(val))[0];\n                        if (usrWhoReacted != null) {\n                            var newUsr = await msgRct.guild.fetchMember(usrWhoReacted);\n                            var checkRole = await msgRct.guild.roles.get(newArr[io][1]);\n                            if (checkRole != null) {\n                                if (!newUsr.roles.has(newArr[io][1])) {\n                                    rectarray[msgRct.id][io][3] = await reaction.users.array();\n                                    _this.storeValue(rectarray, 3, 'reactionRoleInf', cache);\n                                    fs.writeFile(\"./data/reactionRoleData.json\", JSON.stringify(rectarray), function(err) {\n                                        if (err) {\n                                            return console.log(err);\n                                        }\n                                    });\n                                    break;\n                                } else {\n                                    rectarray[msgRct.id][io][3] = await reaction.users.array();\n                                    _this.storeValue(rectarray, 3, 'reactionRoleInf', cache)\n                                    newUsr.removeRole(checkRole);\n                                    if (dmUserAfter) {\n                                        messageSent = messageSent.replace(/{roleName}/g, checkRole.name);\n                                        messageSent = messageSent.replace(/{server}/g, msgRct.guild.name);\n                                        newUsr.send(messageSent);\n                                    }\n                                    fs.writeFile(\"./data/reactionRoleData.json\", JSON.stringify(rectarray), function(err) {\n                                        if (err) {\n                                            return console.log(err);\n                                        }\n                                    });\n                                    break;\n                                }\n                            } else {\n                                delete rectarray[msgRct.id];\n                                _this.storeValue(rectarray, 3, 'reactionRoleInf', cache);\n                                msgRct.edit({\n                                    embed: {\n                                        color: 0xff0000,\n                                        title: \"Role Reaction Menu\",\n                                        description: `An error has occured.\\nOne of the roles, role name - ${newArr[io][2]} does not exist anymore.\\nIn turn, this embed has now shutdown.\\nPlease remake the embed.`,\n                                        timestamp: new Date()\n                                    }\n                                });\n                                _this.callNextAction(cache);\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    } catch (error) {\n        console.log(error);\n    }\n\n}\n\n\ncheckRoles();","storage":"0","varName":"","name":"Run Script"}]},{"name":"reactionStart","temp":"","event-type":"1","_id":"Lwriz","actions":[{"behavior":"0","interpretation":"1","code":"const _this = this;\nconst fs = require('fs');\nvar someArray = [];\nvar someNum = 0;\nvar globalData;\nvar interval;\n\nfunction fetchMessages() {\n    if (someNum != someArray.length) {\n        var channelToFetch = client.channels.get(someArray[someNum]);\n        if (channelToFetch != null) {\n           channelToFetch.fetchMessages({ limit: 100 });\n           console.log(`Fetched messages in channel id ${someArray[someNum]}`);\n           someNum = someNum + 1;\n        } else {\n           delete globalData[someArray[someNum]];\n           fs.writeFile(\"./resources/serverRoleMenu.json\", JSON.stringify(globalData), function(err) {\n               if(err) {\n                   return console.log(err);\n               }\n           }); \n        }\n    } else {\n       console.log('Finished fetching messages from all logged servers.')\n       clearInterval(interval);\n    }\n   }\n\nif(fs.existsSync('./data/reactionRoleData.json')) {\n    fs.readFile('./data/reactionRoleData.json', function read(err, data) {\n        if (err) {\n            throw err;\n        }\n        data = JSON.parse(data)\n    \n        _this.storeValue(data, 3, 'reactionRoleInf', cache);\n    });\n} else {\n    fs.writeFile(\"./data/reactionRoleData.json\", \"{}\", function(err) {\n        if(err) {\n            return console.log(err);\n        }\n    });\n    _this.storeValue({}, 3, 'reactionRoleInf', cache);\n}\n\n\n\nif(fs.existsSync('./resources/serverRoleMenu.json')) {\n    fs.readFile('./resources/serverRoleMenu.json', async function read(err, data) {\n        if (err) {\n            throw err;\n        }\n        var DataToLoop = JSON.parse(data);\n        globalData = DataToLoop;\n        for (var key in DataToLoop) {\n            if (DataToLoop.hasOwnProperty(key)) {\n                await someArray.push(DataToLoop[key]);\n            }\n        }\n        interval = setInterval(fetchMessages, 2000);\n    })\n\n} else {\n    fs.writeFile(\"./resources/serverRoleMenu.json\", \"{}\", function(err) {\n        if(err) {\n            return console.log(err);\n        }\n    });\n}\n\n","storage":"0","varName":"","name":"Run Script"}]},{"name":"LoadServerPrefixes","temp":"","event-type":"1","_id":"LoadSubs","actions":[{"behavior":"0","interpretation":"0","code":"Bot.prefixes = {};\nconsole.log('(Server Prefixes) Initiating Server Prefixes....');\nBot.checkCommand = function(msg) {\n\tconst fs = require(\"fs\");\n\tconst path = require(\"path\");\n\n\ttry {\n\t\tconst defaultTag = Files.data.settings.tag;\n\t\tconst separator = Files.data.settings.separator || '\\\\s+';\n\t\n\t\tlet content = msg.content;\n\t\tlet guild = msg.guild;\n\t\n\t\tcontent = content.split(new RegExp(separator))[0];\n\t\n\t\tconst filePath = path.join(\"data\",\"serverPrefixes.json\");\t\t\n\t\tif(fs.existsSync(filePath)){\n\t\t\tlet saved_prefixes = fs.readFileSync(filePath, \"utf8\");\n\t\t\ttry {\n\t\t\t\tthis.prefixes = JSON.parse(saved_prefixes);\t\t\n\t\t\t} catch(err){}\t\t\t\n\t\t}else{\n\t\t\tthis.prefixes[guild.id] = defaultTag;\n\t\t\tfs.writeFileSync(filePath, JSON.stringify(this.prefixes));\n\t\t}\n\n\t\tlet tag = this.prefixes[guild.id] || defaultTag;\n\n                if(Array.isArray(this.prefixes)){ \n                  console.log(\"Old version serverPrefixes.json detected.  Please remove serverPrefixes.json and restart your bot otherwise setting new prefixes will not work!\")\n                  tag = defaultTag;\n                }\n\n\t\tif(tag){\t\n\t\t\tif(guild) guild.tag = tag;\t\n\n\t\t\tif(content.startsWith(tag)) {\t\t\t\t\n\t\t\t\tlet command = content.substring(tag.length);\n\t\t\t\tif(command) {       \n\t\t\t\t\tif(!Bot._caseSensitive) {\n\t\t\t\t\t\tcommand = command.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t\tconst cmd = Bot.$cmds[command];\n\t\t\t\t\tif(cmd) {\t\t\t\t\t\n\t\t\t\t\t\tActions.preformActions(msg, cmd);\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t}\t\t\t\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n   \n};\nconsole.log('(Server Prefixes) Loaded Function Overwrite: CheckCommand');\n","storage":"0","varName":"","name":"Run Script"}]},{"name":"Join","temp":"member","event-type":"6","_id":"otRJS","actions":[{"server":"0","varName":"","info":"17","storage":"1","varName2":"licznik","name":"Store Server Things"},{"member":"2","varName":"member","info":"22","storage":"1","varName2":"tag","name":"Store Member Info"},{"member":"2","varName":"member","info":"16","storage":"1","varName2":"avatar","name":"Store Member Info"},{"title":"","author":"${tempVars(\"tag\")}","color":"#00FF00","url":"","authorIcon":"${tempVars(\"avatar\")}","authorUrl":"","imageUrl":"","thumbUrl":"","timestamp":"true","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"Witaj ${tempVars(\"member\")}! JesteÅ› ${tempVars(\"licznik\")} uÅ¼ytkownikiem! \nMamy nadziejÄ™, Å¼e zostaniesz na dÅ‚uÅ¼ej!","name":"Set Embed Description"},{"info":"1","find":"ã€”ðŸ“›ã€•dolaczyli","storage":"1","varName":"kanal","name":"Find Channel"},{"storage":"1","varName":"embed","channel":"5","varName2":"kanal","storage3":"0","varName3":"","iffalse":"0","iffalseVal":"","name":"Send Embed Message"}]},{"name":"Leave","temp":"member","event-type":"7","_id":"CNhcT","actions":[{"server":"0","varName":"","info":"17","storage":"1","varName2":"licznik","name":"Store Server Things"},{"member":"2","varName":"member","info":"22","storage":"1","varName2":"tag","name":"Store Member Info"},{"member":"2","varName":"member","info":"16","storage":"1","varName2":"avatar","name":"Store Member Info"},{"title":"","author":"${tempVars(\"tag\")}","color":"#FF0000","timestamp":"true","url":"","authorIcon":"${tempVars(\"avatar\")}","imageUrl":"","thumbUrl":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"Å»egnaj ${tempVars(\"member\")}! Jest nas ${tempVars(\"licznik\")}. \nMamy nadziejÄ™, Å¼e do nas wrÃ³cisz!","name":"Set Embed Description"},{"info":"1","find":"ã€”ðŸ“›ã€•opuÅ›cili","storage":"1","varName":"kanal","name":"Find Channel"},{"storage":"1","varName":"embed","channel":"5","varName2":"kanal","storage3":"0","varName3":"","iffalse":"0","iffalseVal":"","name":"Send Embed Message"}]},{"name":"Bot_Ping","temp":"msg","event-type":"2","_id":"pjMhT","actions":[{"storage":"1","varName":"msg","comparison":"1","value":"'<@574612426947821583>'","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"message":"1","varName":"msg","info":"4","storage":"1","varName2":"kanal","name":"Store Message Info"},{"info":"19","storage":"1","varName2":"p","name":"Store Bot Client Info"},{"info":"3","storage":"1","varName2":"g","name":"Store Bot Client Info"},{"info":"5","storage":"1","varName2":"ping","name":"Store Bot Client Info"},{"channel":"5","varName":"kanal","message":"**Witaj!**\n\nWÅ‚aÅ›ciciel tego bota to:  ` KINI`\n\nPing bota to: `${tempVars(\"ping\")}`\n\nAktualny prefix bota: `${tempVars(\"p\")}`\n\nIloÅ›Ä‡ serwerÃ³w: `${tempVars(\"g\")}`","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"}]},{"name":"StarterRole","temp":"NewMember","event-type":"6","actions":[{"info":"1","find":"Nowy","storage":"1","varName":"Role","name":"Find Role"},{"member":"2","varName2":"NewMember","role":"3","varName":"Role","name":"Add Member Role"}]},{"name":"NewEvent","temp":"","event-type":"0","actions":[]},{"name":"autodiscord-games","temp":"","event-type":"0","actions":[]},{"name":"autodiscord-rangi.games","temp":"","event-type":"0","actions":[]},{"name":"autodiscord-rewards","temp":"","event-type":"0","actions":[]},{"name":"autodiscord-rewards.rangi","temp":"","event-type":"0","actions":[]},{"name":"autodiscord-guildchannel","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.wycieki","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.wycieki.rangi","temp":"","event-type":"0","actions":[]},{"name":"NewEvent","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.botstep.rangi","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.botstep","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.paczki.rangi","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.paczki","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.minecraft.rangi","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.minecraft","temp":"","event-type":"0","actions":[]},{"name":"autodiscord.permissions","temp":"","event-type":"0","actions":[]},{"name":"Mem leave","temp":"","event-type":"7","_id":"ussas","actions":[{"server":"0","varName":"","info":"35","storage":"1","varName2":"memvber","name":"Store Server Info"},{"server":"0","varName":"","info":"30","storage":"1","varName2":"bvot","name":"Store Server Info"},{"storage":"4","varName":"uÅ¼ytkownicy","channelType":"1","toChange":"0","newState":"IloÅ›Ä‡ uÅ¼ytkownikÃ³w: ${tempVars(\"memvber\")}","name":"Edit Channel"},{"storage":"4","varName":"boty","channelType":"1","toChange":"0","newState":"IloÅ›Ä‡ botÃ³w: ${tempVars(\"bvot\")}","name":"Edit Channel"}]},{"name":"Mem join","temp":"","event-type":"6","_id":"SapdI","actions":[{"server":"0","varName":"","info":"35","storage":"1","varName2":"memvber","name":"Store Server Info"},{"server":"0","varName":"","info":"30","storage":"1","varName2":"bvot","name":"Store Server Info"},{"storage":"4","varName":"uÅ¼ytkownicy","channelType":"1","toChange":"0","newState":"IloÅ›Ä‡ uÅ¼ytkownikÃ³w: ${tempVars(\"memvber\")}","name":"Edit Channel"},{"storage":"4","varName":"boty","channelType":"1","toChange":"0","newState":"IloÅ›Ä‡ botÃ³w: ${tempVars(\"bvot\")}","name":"Edit Channel"}]},{"name":"uzytkownik join","permissions":"NONE","restriction":"1","_id":"UoUWx","actions":[{"server":"0","varName":"","info":"18","storage":"1","varName2":"user","name":"Store Server Things"},{"storage":"4","varName":"user","toChange":"name","newState":"ðŸ‘ª UÅ¼ytkownicy: ${tempVars(\"user\")}","name":"Edit Channel"}],"event-type":"6"},{"name":"uzytkownik left","permissions":"NONE","restriction":"1","_id":"amOXY","actions":[{"server":"0","varName":"","info":"18","storage":"1","varName2":"user","name":"Store Server Things"},{"storage":"4","varName":"user","toChange":"name","newState":"ðŸ‘ª UÅ¼ytkownicy: ${tempVars(\"user\")}","name":"Edit Channel"}],"event-type":"7","temp":""},{"name":"godzina refresh","permissions":"NONE","restriction":"1","_id":"YHhUQ","actions":[{"type":"3","storage":"1","varName":"godzinka","name":"Store Time Info"},{"type":"4","storage":"1","varName":"minute","name":"Store Time Info"},{"storage":"1","varName":"minute","comparison":"4","value":"10","iftrue":"3","iftrueVal":"1","iffalse":"0","iffalseVal":"1","name":"Check Variable"},{"behavior":"0","interpretation":"0","code":"var min = tempVars(\"minute\").toString();\n\nif (min < 10) {\n    var min2 = '0' + min;\n    console.log(min2);\n} else {\n    min2;\n    console.log(min2);\n};\n\nthis.storeValue(min2, 1, \"minute\", cache);","storage":"0","varName":"","name":"Run Script"},{"storage":"4","varName":"hour","toChange":"name","newState":"ðŸ•— Godzina: ${tempVars(\"godzinka\")}:${tempVars(\"minute\")}","name":"Edit Channel"}],"event-type":"3","temp":"60"}]